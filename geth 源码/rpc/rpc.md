#目录 
# rpc Overview
 
```ccard
type: folder_brief_live
```

### **0. doc**
- rpc/doc.go 可以看一看
### **1. 基础文件**

这些文件定义了 RPC 系统中的核心数据结构、错误处理和通用逻辑，几乎被其他文件所依赖：

- **`types.go`**：[[types.go]]
    - 定义了 block number，和其行为
    - 定义了ServerCodec 接口，是一个读写解析 RPC 消息的服务器要实现的功能。
    - 定义了 API 结构，被大量使用，用来指明一个 [[geth 源码/node/node]] 作为server 可以提供的调用行为
- **`json.go`**：
    - 提供序列化和反序列化的辅助函数，将 Go 数据结构和 JSON 格式相互转换。

---

### **2. 核心逻辑文件**

这些文件实现了 RPC 系统中最重要的功能，负责处理客户端请求、方法调用、响应生成等逻辑：

- **`handler.go`**：
    - 定义了核心的 RPC 方法处理逻辑。
    - 负责解析请求、查找对应方法、调用方法并返回结果。
- **`server.go`**：
    - 定义了 RPC 服务端的通用逻辑，包括方法注册、请求处理和响应生成。
- **`client.go`**：
    - 定义了 RPC 客户端的逻辑，负责与服务端通信，发送请求并解析响应。
    - 依赖 `handler.go` 处理方法调用。

---

### **3. 通信协议实现文件**

这些文件实现了不同的通信协议，暴露统一的接口供客户端和服务端调用：

- **`http.go`**：
- **`websocket.go`**：
- **`ipc.go`**：
- **其他 IPC 平台文件（如 `ipc_unix.go`, `ipc_windows.go`, `ipc_js.go`）**：
    - 实现与特定操作系统相关的 IPC 逻辑。
    - 是 `ipc.go` 的子模块，提供平台相关的支持。
- **`inproc.go`**：
    - 实现进程内的调用逻辑（即不通过网络或文件进行通信，直接调用）。
    - **作用**：用于测试环境或内部场景下的快速通信。

---

### **4. 订阅和服务相关文件**

这些文件处理订阅机制和服务端的功能扩展：

- **`subscription.go`**：
    
    - 实现 RPC 的订阅逻辑，支持客户端监听事件（如新区块、合约日志等）。
    - 依赖 `handler.go` 处理订阅请求。
    - **作用**：扩展 RPC 的功能，提供事件驱动的通信模式。
- **`service.go`**：
    
    - 提供 RPC 服务端的功能注册和管理逻辑。
    - 与 `server.go` 配合使用，允许动态注册新服务。
    - **作用**：实现服务端功能模块化。


