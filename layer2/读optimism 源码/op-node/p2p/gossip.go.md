
# 概念

![[Pasted image 20250916091816.png]]

在 Gossip 协议下，网络中两个节点之间有三种通信方式:

- Push: 节点 A 将数据 (key,value,version) 及对应的版本号推送给 B 节点，B 节点更新 A 中比自己新的数据
- Pull：A 仅将数据 key, version 推送给 B，B 将本地比 A 新的数据（Key, value, version）推送给 A，A 更新本地
- Push/Pull：与 Pull 类似，只是多了一步，A 再将本地比 B 新的数据推送给 B，B 则更新本地

注意，gossip 会永远持续，来不断的交换更新的数据。存在只推送增量数据和推送全量数据两种模式。


每个节点只知道少数几个和它相邻的节点，称为view。节点不会把消息给回去。这样，实际在全局的效果是，没有回路消息，但是确实有冗余，即一个节点会从不同的节点身上接收到同一个消息。
在 Gossip 协议中，View 是 **动态变化** 的：

- 新节点加入网络时，会从引导节点那里获取初始 view。
- 节点之间通信时，会交换部分视图内容（比如 “我认识谁”）。
- 周期性地替换/更新 view 中的节点，以保持网络健康和连通性。
- 检测到某个节点失联/长时间无响应，可能从 view 中移除。



